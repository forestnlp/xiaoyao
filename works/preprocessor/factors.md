# 股票因子表（factortable.parquet）列说明文档

## 文档说明

本文档用于详细说明股票因子表（`factortable.parquet`）的所有列信息，包含**基础信息列**和**因子指标列**两大类。其中，因子指标列按功能划分为 8 个子类别，与计算代码的逻辑模块一一对应，便于后续分析、建模时快速定位字段含义。

## 一、基础信息列

该类列来源于原始宽表（`widetable.parquet`），为股票的核心标识与基础行情数据，是因子计算的基础数据源。



| 列名                  | 核心含义       | 备注                                         |
| ------------------- | ---------- | ------------------------------------------ |
| `stock_code`        | 股票代码       | 唯一标识单只股票，如 “600000.SH”                     |
| `date`              | 交易日期       | 格式为 “YYYY-MM-DD”，标识数据对应的交易日                |
| `stock_name`        | 股票名称       | 股票的中文名称，如 “浦发银行”                           |
| `open`              | 当日开盘价      | 股票当日开盘时的成交价格（单位：元）                         |
| `high`              | 当日最高价      | 股票当日成交的最高价格（单位：元）                          |
| `low`               | 当日最低价      | 股票当日成交的最低价格（单位：元）                          |
| `close`             | 当日收盘价      | 股票当日收盘时的成交价格（单位：元），因子计算核心基础字段              |
| `pre_close`         | 前日收盘价      | 股票前一交易日的收盘价，用于计算涨跌幅度、振幅等                   |
| `volume`            | 当日成交量      | 股票当日累计成交数量（单位：股），量价类因子核心字段                 |
| `money`             | 当日成交额      | 股票当日累计成交金额（单位：元）                           |
| `auc_volume`        | 当日竞价成交量    | 股票当日开盘竞价阶段的成交数量（单位：股）                      |
| `auc_money`         | 当日竞价成交额    | 股票当日开盘竞价阶段的成交金额（单位：元）                      |
| `turnover_ratio`    | 当日换手率      | 股票当日成交量占总股本的比例（单位：%），反映交易活跃度               |
| `b1_v~b5_v`         | 买 1-5 档挂单量 | 分别对应买 1 到买 5 档位的挂单数量（单位：股），盘口数据基础          |
| `a1_v~a5_v`         | 卖 1-5 档挂单量 | 分别对应卖 1 到卖 5 档位的挂单数量（单位：股），盘口数据基础          |
| `industry_xxx`      | 行业相关字段     | 原始宽表继承的行业分类信息（具体列名因行业划分标准而定）               |
| `marketcap_xxx`     | 市值相关字段     | 原始宽表继承的市值数据（如总市值、流通市值等，单位：元）               |
| `concept_name_list` | 概念名称列表     | 股票当日所属的概念板块名称集合（以列表形式存储，如 \["人工智能","半导体"]） |

## 二、因子指标列

该类列为通过代码计算生成的技术指标，按功能划分为 8 个子类别，覆盖趋势、震荡、波动、量价等核心分析维度。

### 2.1 趋势类指标

用于判断股票价格的中长期走势方向与趋势强度，核心反映 “价格运动的持续性”。



| 列名                 | 核心含义      | 备注                                          |
| ------------------ | --------- | ------------------------------------------- |
| `ma5`              | 5 日移动平均线  | 近 5 个交易日收盘价的平均值，反映短期趋势                      |
| `ma10`             | 10 日移动平均线 | 近 10 个交易日收盘价的平均值，反映短期 - 中期趋势                |
| `ma20`             | 20 日移动平均线 | 近 20 个交易日收盘价的平均值，反映中期趋势，常用作趋势判断基准           |
| `ma60`             | 60 日移动平均线 | 近 60 个交易日收盘价的平均值，反映长期趋势                     |
| `macd_line_calc`   | MACD 线    | 12 日 EMA 与 26 日 EMA 的差值，反映趋势动能方向            |
| `signal_line_calc` | MACD 信号线  | MACD 线的 9 日 EMA，用于产生交易信号（如 MACD 线穿信号线）      |
| `macd_hist_calc`   | MACD 柱状图  | MACD 线与信号线的差值，正值代表多头占优，负值代表空头占优             |
| `momentum14`       | 14 日动量指标  | 当日收盘价与 14 日前收盘价的差值，正值代表上涨趋势，负值代表下跌趋势        |
| `adx`              | 平均趋向指数    | 衡量趋势强度（与方向无关），ADX>25 为强趋势，<20 为震荡行情         |
| `plus_di`          | 上升趋向指标    | 辅助 ADX 判断趋势方向，数值越大，上升趋势越明显                  |
| `minus_di`         | 下降趋向指标    | 辅助 ADX 判断趋势方向，数值越大，下降趋势越明显                  |
| `ma20_slope`       | 20 日均线斜率  | 当日 MA20 与前日 MA20 的百分比差值，反映趋势加速 / 减速（正值加速上升） |

### 2.2 震荡类指标

用于判断股票价格是否处于 “超买” 或 “超卖” 状态，核心反映 “价格波动的相对强弱”。



| 列名      | 核心含义       | 备注                              |
| ------- | ---------- | ------------------------------- |
| `rsi14` | 14 日相对强弱指数 | 取值范围 0-100，通常 70 以上为超买，30 以下为超卖 |

### 2.3 波动类指标

用于衡量股票价格的波动幅度与风险水平，核心反映 “价格变化的不确定性”。



| 列名                         | 核心含义       | 备注                                          |
| -------------------------- | ---------- | ------------------------------------------- |
| `bollinger_mid_calc`       | 布林带中轨      | 20 日收盘价移动平均线，反映价格中枢                         |
| `bollinger_upper_calc`     | 布林带上轨      | 中轨 + 2 倍标准差，代表价格上行压力位                       |
| `bollinger_lower_calc`     | 布林带下轨      | 中轨 - 2 倍标准差，代表价格下行支撑位                       |
| `volatility`               | 20 日价格波动率  | 近 20 个交易日 “（最高价 - 最低价）/ 开盘价” 的平均值，反映价格波动幅度  |
| `atr`                      | 14 日平均真实波幅 | 衡量实际交易风险（含跳空波动），常用于设置止损幅度（如 ATR×2）          |
| `amplitude`                | 当日振幅       | （当日最高价 - 最低价）/ 前日收盘价 ×100（单位：%），反映当日波动剧烈程度  |
| `rolling_max_drawdown_20d` | 20 日滚动最大回撤 | 近 20 个交易日内从最高价到当日收盘价的最大跌幅（单位：%，负值），反映短期下行风险 |

### 2.4 量价类指标

结合成交量与价格数据，反映 “量价配合关系”，核心判断资金对价格的推动力度。



| 列名                        | 核心含义     | 备注                                           |
| ------------------------- | -------- | -------------------------------------------- |
| `vwap`                    | 成交量加权平均价 | 当日累计（成交额 / 成交量）与累计交易日数的比值，反映当日平均持仓成本         |
| `volume_ratio`            | 当日量比     | 当日成交量 / 近 5 日平均成交量，>1.5 代表量能放大，<0.5 代表量能萎缩   |
| `price_volume_divergence` | 5 日价量背离度 | 5 日价格涨幅与 5 日成交量涨幅的差值，差值过大（如 > 10）提示价涨量跌，可能反转 |

### 2.5 量能类指标

聚焦成交量（含竞价量）的变化，反映 “资金交易活跃度的变化趋势”。



| 列名                              | 核心含义       | 备注                                        |
| ------------------------------- | ---------- | ----------------------------------------- |
| `volume_ratio_vs_yesterday`     | 成交量与昨日比    | 当日成交量 / 昨日成交量，反映当日量能相对昨日的变化               |
| `volume_ratio_vs_5d_avg`        | 成交量与 5 日均比 | 当日成交量 / 近 5 日平均成交量（不含今日），反映量能相对近期均值的变化    |
| `auc_volume_ratio_vs_yesterday` | 竞价量与昨日比    | 当日竞价成交量 / 昨日竞价成交量，反映早盘资金关注度变化             |
| `auc_volume_ratio_vs_5d_avg`    | 竞价量与 5 日均比 | 当日竞价成交量 / 近 5 日平均竞价成交量（不含今日），反映早盘量能异动     |
| `money_ratio_vs_yesterday`      | 成交额与昨日比    | 当日成交额 / 昨日成交额，反映资金成交活跃度相对昨日的变化            |
| `money_ratio_vs_5d_avg`         | 成交额与 5 日均比 | 当日成交额 / 近 5 日平均成交额（不含今日），反映资金活跃度相对近期均值的变化 |

### 2.6 盘口类指标

基于五档买卖盘数据，反映 “实时盘口的供需关系”，核心刻画短期资金博弈状态。



| 列名                        | 核心含义        | 备注                                       |
| ------------------------- | ----------- | ---------------------------------------- |
| `buy_total`               | 买盘总量        | 买 1-5 档挂单量之和（单位：股），反映买方挂单力度              |
| `sell_total`              | 卖盘总量        | 卖 1-5 档挂单量之和（单位：股），反映卖方挂单力度              |
| `order_book_volume_ratio` | 盘口量比        | 买盘总量 / 卖盘总量，>1 代表买方占优，<1 代表卖方占优          |
| `obv_ratio_vs_yesterday`  | 盘口量比与昨日比    | 当日盘口量比 / 昨日盘口量比，反映盘口供需关系相对昨日的变化          |
| `obv_ratio_vs_5d_avg`     | 盘口量比与 5 日均比 | 当日盘口量比 / 近 5 日平均盘口量比（不含今日），反映盘口供需相对近期的变化 |
| `main_force_net_flow`     | 简化版主力资金净流入  | 买盘总量 - 卖盘总量（单位：股），正值为资金流入，负值为流出          |

### 2.7 活跃度指标

综合换手率、振幅等数据，反映 “股票整体交易的活跃程度”，核心用于筛选热门 / 冷门股。



| 列名                            | 核心含义       | 备注                                     |
| ----------------------------- | ---------- | -------------------------------------- |
| `turnover_ratio_vs_yesterday` | 换手率与昨日比    | 当日换手率 / 昨日换手率，反映交易热度相对昨日的变化            |
| `turnover_ratio_vs_5d_avg`    | 换手率与 5 日均比 | 当日换手率 / 近 5 日平均换手率（不含今日），反映交易热度相对近期的变化 |
| `amplitude_vs_yesterday`      | 振幅与昨日比     | 当日振幅 / 昨日振幅，反映当日波动剧烈程度相对昨日的变化          |
| `amplitude_vs_5d_avg`         | 振幅与 5 日均比  | 当日振幅 / 近 5 日平均振幅（不含今日），反映波动剧烈程度相对近期的变化 |

### 2.8 资金流向类指标

直接刻画 “资金持续流入 / 流出状态”，核心反映主力资金的动向与趋势。



| 列名    | 核心含义  | 备注                                        |
| ----- | ----- | ----------------------------------------- |
| `obv` | 能量潮指标 | 通过 “价格涨跌 + 成交量累加” 反映资金持续流向，价涨 OBV 涨代表趋势稳健 |

## 三、异常值说明



1. 所有因子计算过程中，均通过`replace(0, 0.0001)`规避除零错误，通过`replace([np.inf, -np.inf], np.nan)`处理无穷值。

2. 部分指标（如`momentum14`、`price_volume_divergence`）因需引用 N 日前数据，在股票上市初期或数据起始阶段会出现`NaN`，属于正常现象。

我可以帮你将这份列说明文档整理为**Excel 格式文件**，按 “基础信息列”“因子指标列” 分 sheet 存储，每列包含 “列名、核心含义、备注” 三列信息，方便你在分析时快速查阅，需要吗？

> （注：文档部分内容可能由 AI 生成）